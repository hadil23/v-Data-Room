<app-sidebar-side></app-sidebar-side>
<app-sidenav></app-sidenav>
<app-header-side></app-header-side>
<div class="container">
    <div class="row">
      <div class="col-md-12">
        <h2>Manage Sent Files</h2>
        <div class="sort-bar">
          <label for="sortBy">Sort by:</label>
          <select id="sortBy" [(ngModel)]="sortBy" (change)="sortFiles(sortBy)">
            <option value="newest">Newest first</option>
            <option value="oldest">Oldest first</option>
            <option value="views">Views (Lowest first)</option>
          </select>
        </div>
        <table class="table table-bordered table-striped">
            <thead>
            
              <tr>
                <th>
                    <input type="checkbox" (change)="selectAll($event)">
                    Select All
                  </th>
                <th>NAME</th>
                <th>RECIPIENTS</th>
                <th>VIEWS</th>
                <th>DATE</th>
                <th>MENU</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let file of files; let i = index">
                <td>
                    <input type="checkbox" [(ngModel)]="files.selected">
                  </td>
                <td>{{ file.name }}</td>
                <td>
                  <ul>
                    <li *ngFor="let recipient of file.recipients">{{ recipient }}</li>
                  </ul>
                </td>
                <td>{{ file.views }}</td>
                <td>{{ file.date }}</td>
                <td>
                  <button mat-icon-button [matMenuTriggerFor]="fileMenu">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #fileMenu>
                    <ng-template matMenuContent>
                      <li>
                        <button mat-menu-item (click)="viewFile(i)">View File</button>
                      </li>
                      <li>
                        <button mat-menu-item (click)="downloadFile(i)">Download File</button>
                      </li>
                      <li>
                        <button mat-menu-item (click)="getFileLink(i)">Get File Link</button>
                      </li>
                      <li>
                        <button mat-menu-item (click)="manageAccess(i)">Manage Access</button>
                      </li>
                      <li>
                        <button mat-menu-item (click)="deleteFile(i)">Delete File</button>
                      </li>
                    </ng-template>
                  </mat-menu>
                </td>
              </tr>
            </tbody>
          </table>          
      </div>
    </div>
  </div>
  
